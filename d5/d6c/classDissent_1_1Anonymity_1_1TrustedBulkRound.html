<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Dissent: Dissent::Anonymity::TrustedBulkRound Class Reference</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Dissent
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>Dissent</b>      </li>
      <li class="navelem"><b>Anonymity</b>      </li>
      <li class="navelem"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html">TrustedBulkRound</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Dissent::Anonymity::TrustedBulkRound Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Dissent::Anonymity::TrustedBulkRound" --><!-- doxytag: inherits="Dissent::Anonymity::RepeatingBulkRound" -->
<p>Represents a single instance of a cryptographically secure anonymous exchange.  
 <a href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d3/d1d/TrustedBulkRound_8hpp_source.html">TrustedBulkRound.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Dissent::Anonymity::TrustedBulkRound:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.png" usemap="#Dissent::Anonymity::TrustedBulkRound_map" alt=""/>
  <map id="Dissent::Anonymity::TrustedBulkRound_map" name="Dissent::Anonymity::TrustedBulkRound_map">
<area href="../../d7/dca/classDissent_1_1Anonymity_1_1RepeatingBulkRound.html" title="Represents a single instance of a cryptographically secure anonymous exchange." alt="Dissent::Anonymity::RepeatingBulkRound" shape="rect" coords="250,112,490,136"/>
<area href="../../d3/d6f/classDissent_1_1Anonymity_1_1Round.html" title="An anonymous exchange amongst peers of a static group." alt="Dissent::Anonymity::Round" shape="rect" coords="250,56,490,80"/>
<area href="../../d4/d95/classDissent_1_1Utils_1_1StartStop.html" title="A thin class to encapsulate the common start / stop pattern." alt="Dissent::Utils::StartStop" shape="rect" coords="0,0,240,24"/>
<area href="../../d7/d32/classDissent_1_1Messaging_1_1Source.html" title="Produces data to be received by a sink." alt="Dissent::Messaging::Source" shape="rect" coords="250,0,490,24"/>
<area href="../../d9/d03/classDissent_1_1Messaging_1_1ISender.html" title="Derivatives should implement a block-free Send." alt="Dissent::Messaging::ISender" shape="rect" coords="500,0,740,24"/>
</map>
 </div></div>

<p><a href="../../db/d6b/classDissent_1_1Anonymity_1_1TrustedBulkRound-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac22512810a9be97cf009496bf52cd518"></a><!-- doxytag: member="Dissent::Anonymity::TrustedBulkRound::Integer" ref="ac22512810a9be97cf009496bf52cd518" args="" -->
typedef <a class="el" href="../../d7/d7c/classDissent_1_1Crypto_1_1Integer.html">Dissent::Crypto::Integer</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Integer</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#a0870ec87a65c3bc59492505625e3bcec">TrustedBulkRound</a> (const <a class="el" href="../../d1/da7/classDissent_1_1Identity_1_1Group.html">Group</a> &amp;group, const <a class="el" href="../../d0/d50/classDissent_1_1Identity_1_1Credentials.html">Credentials</a> &amp;creds, const <a class="el" href="../../df/d5b/classDissent_1_1Connections_1_1Id.html">Id</a> &amp;round_id, QSharedPointer&lt; <a class="el" href="../../db/d5e/classDissent_1_1Connections_1_1Network.html">Network</a> &gt; network, <a class="el" href="../../d1/d0c/classDissent_1_1Messaging_1_1GetDataCallback.html">GetDataCallback</a> &amp;get_data, CreateRound create_shuffle=&amp;TCreateRound&lt; <a class="el" href="../../df/d28/classDissent_1_1Anonymity_1_1ShuffleRound.html">ShuffleRound</a> &gt;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a0870ec87a65c3bc59492505625e3bcec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#a5bb74ae0644bf9f8a16f43f8c319a924">HandleDisconnect</a> (const <a class="el" href="../../df/d5b/classDissent_1_1Connections_1_1Id.html">Id</a> &amp;id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If the ConnectionTable has a disconnect, the round may need to react.  <a href="#a5bb74ae0644bf9f8a16f43f8c319a924"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae229c8e677a5273b1c8765678b5198ec"></a><!-- doxytag: member="Dissent::Anonymity::TrustedBulkRound::SupportsRejoins" ref="ae229c8e677a5273b1c8765678b5198ec" args="()" -->
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#ae229c8e677a5273b1c8765678b5198ec">SupportsRejoins</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This protocol supports peers in rejoining, but it isn't implemented. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#abf630f78041e811754405c147ecb2ef2">PrepForNextPhase</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Does all the prep work for the next phase, clearing and zeroing out all the necessary fields.  <a href="#abf630f78041e811754405c147ecb2ef2"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Represents a single instance of a cryptographically secure anonymous exchange. </p>
<p>The "V3" bulk protocol builds on the "V2" by reusing the shuffle to exchange public signing keys; however, the anonymous DiffieHellman keys are no longer used. The cleartext messages are still of the same form: phase, next phase message length, message, and signature. The difference is in how the xor texts are generated. This model assumes that only a core set of resources are trusted and allows for pregeneration of xor masks. A peer can generate sufficient bits, share them with another peer who will transmit the bits for them, and then go offline.</p>
<p>To generate the bits, each non-server creates a RNG for each server peer using DH shared secret created as a result of combining their private DH key with the servers' public DH. Each server creates a RNG for each peer (server and non-server) using their private DH and with each peers' public DH. Each RNG is used to generate a message spanning the length of all anonymous messages in the given phase. Each peer than combines via xor these masks to generate an xor mask. The member then xors their message into their space inside the message. This final message is distributed to all other peers. Upon collecting all messages, An xor upon all of them will reveal the original messages for all peers. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0870ec87a65c3bc59492505625e3bcec"></a><!-- doxytag: member="Dissent::Anonymity::TrustedBulkRound::TrustedBulkRound" ref="a0870ec87a65c3bc59492505625e3bcec" args="(const Group &amp;group, const Credentials &amp;creds, const Id &amp;round_id, QSharedPointer&lt; Network &gt; network, GetDataCallback &amp;get_data, CreateRound create_shuffle=&amp;TCreateRound&lt; ShuffleRound &gt;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#a0870ec87a65c3bc59492505625e3bcec">Dissent::Anonymity::TrustedBulkRound::TrustedBulkRound</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/da7/classDissent_1_1Identity_1_1Group.html">Group</a> &amp;&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/d50/classDissent_1_1Identity_1_1Credentials.html">Credentials</a> &amp;&#160;</td>
          <td class="paramname"><em>creds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d5b/classDissent_1_1Connections_1_1Id.html">Id</a> &amp;&#160;</td>
          <td class="paramname"><em>round_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QSharedPointer&lt; <a class="el" href="../../db/d5e/classDissent_1_1Connections_1_1Network.html">Network</a> &gt;&#160;</td>
          <td class="paramname"><em>network</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d0c/classDissent_1_1Messaging_1_1GetDataCallback.html">GetDataCallback</a> &amp;&#160;</td>
          <td class="paramname"><em>get_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CreateRound&#160;</td>
          <td class="paramname"><em>create_shuffle</em> = <code>&amp;TCreateRound&lt;<a class="el" href="../../df/d28/classDissent_1_1Anonymity_1_1ShuffleRound.html">ShuffleRound</a>&gt;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>Group used during this round </td></tr>
    <tr><td class="paramname">creds</td><td>the local nodes credentials </td></tr>
    <tr><td class="paramname">round_id</td><td>Unique round id (nonce) </td></tr>
    <tr><td class="paramname">network</td><td>handles message sending </td></tr>
    <tr><td class="paramname">get_data</td><td>requests data to share during this session </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5bb74ae0644bf9f8a16f43f8c319a924"></a><!-- doxytag: member="Dissent::Anonymity::TrustedBulkRound::HandleDisconnect" ref="a5bb74ae0644bf9f8a16f43f8c319a924" args="(const Id &amp;id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#a5bb74ae0644bf9f8a16f43f8c319a924">Dissent::Anonymity::TrustedBulkRound::HandleDisconnect</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d5b/classDissent_1_1Connections_1_1Id.html">Id</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the ConnectionTable has a disconnect, the round may need to react. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the peer that was disconnected </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d3/d6f/classDissent_1_1Anonymity_1_1Round.html#a984c284a706d0cc6b9bfd648f40b25b9">Dissent::Anonymity::Round</a>.</p>

</div>
</div>
<a class="anchor" id="abf630f78041e811754405c147ecb2ef2"></a><!-- doxytag: member="Dissent::Anonymity::TrustedBulkRound::PrepForNextPhase" ref="abf630f78041e811754405c147ecb2ef2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d5/d6c/classDissent_1_1Anonymity_1_1TrustedBulkRound.html#abf630f78041e811754405c147ecb2ef2">Dissent::Anonymity::TrustedBulkRound::PrepForNextPhase</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Does all the prep work for the next phase, clearing and zeroing out all the necessary fields. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if all good, returns false if stopped </dd></dl>

<p>Reimplemented from <a class="el" href="../../d7/dca/classDissent_1_1Anonymity_1_1RepeatingBulkRound.html#abffd79805595a6640580c4eaab7e9927">Dissent::Anonymity::RepeatingBulkRound</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Anonymity/<a class="el" href="../../d3/d1d/TrustedBulkRound_8hpp_source.html">TrustedBulkRound.hpp</a></li>
<li>src/Anonymity/TrustedBulkRound.cpp</li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 10 2012 13:25:29 for Dissent by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
